Лекция 7
Массивы

Цель лекции. Дать определение, что такое массив. Изучить структуру массива, какие они бывают. Уяснить, как объявляется формат массива. Что такое инициализация. Рассмотреть примеры решения массива.

Тип массив – структура данных, представляющая собой набор переменных одинакового типа, имеющих общее имя. 
Каждый элемент массива однозначно определяется именем и индексом (номером элемента в массиве). 
Индексы массива принадлежат целочисленному типу. Массивы позволят легко обрабатывать большое количество связанных переменных.
Массив может быть: 
одномерным   A1 [  ]
двумерным   A2 [ , ]       

Массив заданный математически имеет вид: 
одномерный  - строка - A = (1, 5, 8, 3, 4, 2, 7, 0)  или столбец         
двумерный  B ( например, 3 – строки и 2 – столбца )
   
Формат объявления одномерного массива в C#: 
тип[ ] ИмяМассива = new тип [размер];
Формат объявления двумерного массива в C#: 
тип [ , ] ИмяМассива = new тип [количество строк, количество столбцов];
тип – type  – имя типа значений элементов.
[ ] – признак массива. Запятые внутри скобок задают размерность массива. Запятых нет – массив одномерный, запятая одна – массив двумерный.
ИмяМассива – имя массива.
new – оператор, предназначенный для создания объекта любого классового типа, позволяет динамически размещать в памяти элементы массива. 
Размер – количество элементов, которые будут храниться в массиве.
Элементы массива могут быть любых типов.
Доступ к элементу массива осуществляется посредством индекса (позицию элемента внутри массива): 
ИмяМассива [ НомерЭлемента ].
Индексация массивов начинается с нуля: массив с элементами n индексируется от 0 до n-1. При обращении к элементу массива, надо указать его имя и номер элемента в квадратных скобках.
Например: A[0] – первый элемент массива A.
                    A[4] – пятый элемент массива А.
B[2,3] – элемент, лежащий на пересечении 3 строки и 4 столбца массива B.
Примеры объявления массивов:
static void Main(string[] args)
	{
	int[ ] А = new int[5]; // одномерный массив А из 5 целых чисел
 char[ ] H = new char[10];  // одномерный массив H из 10 символов
	double[,] M = new double [2, 3]; // двумерный массив 2х3 вещественных 
                                                      //чисел, содержащий 2 строки и 3 столбца
	}
При объявлении массива можно выполнить его инициализацию, т.е. присвоить начальные значения элементам массива в момент его создания. 
Формат объявления одномерного массива с инициализацией: 
тип [ ] ИмяМассива = {v1,v2,v3,…vn};
Формат объявления двумерного массива в C#: 
тип [ , ] ИмяМассива = {{v11,v12,…v1j},…{vi1,vi2,…vij}};
                                                               //1-я строка ……… i-я строка
Здесь начальные значения, присваиваемые элементам массива, задаются с помощью последовательности v1, v2, v3,…vn  для одномерного массива и vij – для массива размерностью ( i x j ), где i  – номер строки, а j – номер столбца для двумерного массива.
Примеры объявления массивов с инициализацией:
int[  ] С = new int[ ] { 1, 3, 5, -7, 9 };  // массив С инициализирован пятью элементами
double[ ] D = { 1.5, 2.1, 3.65, 4.7, 5.14, 6.36 };      // Альтернативный синтаксис
char[ ] Q = {'a','b','g'};       //массив Q инициализирован тремя символами
string[ ] Team = {"Zenith", "Dynamo", "Sparta", "Rotor", "CSK"};
int[ , ] M= { { 1, 2, 3 }, { 4, 5, 6 } };    // массив M: 2 строки и 3 столбца инициализирован 
int[ ,] L ={{0,2,4,6},{2,9,6,3},{4,7,5,8}, {1,6,5,7}}; 
                          //массив L (4х4) инициализирован. . . 
При инициализации допустимо указывать размер массива, но количество элементов списка инициализации должно соответствовать размерности массива. Иначе компилятор выведет сообщение об ошибке. 

Например:
Int [ ] nems – new int [ 10 ] { 99, 10, 100, 15, 76, 23, 85, 9 , 87, 49};
В этом объявлении размер массива nems явно задан равным 10.
Массив можно инициализировать во время выполнения программы в цикле.
Например:
static void Main(string[] args)
   {
   int[] R = new int[5] ;
  for (int k=0; k<=4; k++)
     {
     Console.Write("Введите {0}", k);
     Console.WriteLine(" элемент массива R"); 
     R[k] = Convert.ToInt32(Console.ReadLine());
      //ввод элемента массива R
     }                                        
     Console.ReadKey();
}
В C# также предусмотрена инструкция foreach. Она обеспечивает простой и понятный способ выполнения итерации элементов в массиве. 
Синтаксис инструкции foreach:
foreach (int ИндексМассива in ИмяМассива)
{
	Инструкции тела цикла
}
int ИндексМассива – тип и имя переменной для номера элемента массива (целое число).
Слово in – в.
ИмяМассива – имя массива.
Пример. Следующий код создает массив Числа и осуществляет его итерацию с помощью инструкции foreach.
int[] Числа = { 4, 5, 6, 1, 2, 3, -2, -1, 0 };
foreach (int i in Числа)
{
	Console.Write("{0} ", i);
}
Вывод в консоль строки: 4 5 6 1 2 3 -2 -1 0     


Операции, производимые над элементами массива, полностью определяются типом этих элементов.

7.1 Операции с массивами
Типовые операции при работе с массивами:
Вывод массива;
Ввод массива;
Поиск максимального/минимального элемента массива;
Поиск заданного элемента массива;
Сортировка массива.
Часто используемые операции: накопление суммы элементов массива, расчет среднего арифметического значения элементов массива.
Вывод массива
Под выводом массива понимается вывод на экран монитора, значений элементов заданного / сформированного массива.
При выводе всех элементов массива удобно использовать оператор цикла  for или foreach, при этом переменная счетчик может быть использована в качестве индекса элементов массива.
Пример вывода одномерного массива Team:

static void Main(string[] args)
  {
  string[] Team = { "Zenit ", "Dynamo ", "Sparta ", "Rotor ", "CSK " 
};
foreach (string i in (string[])Team)
  {
  Console.Write("{0} ", i); //вывод элементов массива Team
  }
  Console.ReadKey();
}




Ввод массива
Под вводом массива понимается процесс получения от пользователя во время работы программы, значений элементов массива.
При вводе элементов массива удобно использовать оператор цикла  for или foreach, при этом переменная счетчик может быть использована в качестве индекса элементов массива.
Иногда в качестве элементов массива используют случайные числа, которые можно получить с помощью функции Random() - случайное число в диапазоне 0..1. 
Программа помещает в массив A числа от 0 до 9.
static void Main(string[] args)
{
 int[] A = new int[10]; 	  // одномерный массив А из 10 целых чисел
  for (int i=0; i<10; i++)
A[i] = i;
for (int i = 0; i < 10; i++)
Console.WriteLine("A[" + i + "]=" + A[i]);
Console.ReadKey();
        }
Таблица 7.1
Схематично представленный массив А 

Пример заполнения двумерного массива Т[3x4] числами от 1 до 12:  

static void Main(string[] args)
 {
int[ , ] T = new int[3,4];
Console.WriteLine("Сформированная матрица");
Console.WriteLine();
for (int i = 0; i < 3; ++i)
{
  for (int j = 0; j < 4; ++j)
  {
T[i, j] = (i * 4) + j + 1;
Console.Write("{0,2} ",T[i, j]);  
  }
Console.WriteLine();
}
Console.ReadKey();
        } 

В этом примере элемент массива Т[0,0] примет значение 1, Т[0,1] примет значение 2 … Т[2,3] примет значение 12. Схематично массив Т можно представить:




Поиск максимального ( или минимального ) элемента массива
Алгоритм поиска. Делается предположение, что 1-й элемент массива max (min), затем все элементы массива сравниваются с ним.  Если во время проверки обнаруживается, что очередной элемент больше (меньше) принятого за max (min), то этот элемент становится максимальным (минимальным).
Пример 1. В массиве X из 10 элементов вычислить наибольший элемент массива и его номер.


static void Main(string[] args)
        {
            int[] X = new int[10]{-5, 6, -8, 2, 4, 9, -7, 4, 1, 0}; 	 
                                  // одномерный массив Х из 10 целых чисел        
            int Xmax;  // максимальный элемент
            int Imax;   // номер максимального элемента
            for (int i = 0; i < 10; i++)
            Console.WriteLine("X[" + i + "]=" + X[i]);
            Console.WriteLine(); // вывод элементов массива
            Xmax = X[0];            // предположение
            Imax = 0;
            for (int i = 1; i < 10; i++)
                if (X[i] > Xmax)
                {
                    Xmax = X[i];   // выявление max
                    Imax = i;
                }
            Console.WriteLine("Максимальный элемент: {0} ", Xmax);
            Console.WriteLine("Его номер: {0} ", Imax+1);
            Console.ReadKey();
        }

При выявлении минимального элемента условие > заменяется на < :
if (X[i] < Xmin)
   {
  Xmin = X[i];   // выявление min
   Imin = i;         // его номера
  }
Поиск заданного элемента массива
Под поиском заданного элемента массива понимается необходимость определить, содержит ли массив определенную информацию или нет. Наиболее простой алгоритм поиска – простой перебор неупорядоченных элементов. 
Поиск осуществляется последовательным сравнением элементов массива с образцом до тех пор, пока не будет найден элемент, равный образцу, или пока не будут проверены все элементы.
Для поиска элементов используют операторы цикла for, while или do ... while 
Пример 2. Найти заданный элемент в массиве и  вывести его на экран дисплея.

static void Main(string[] args)
    {
         int[] Mas = new int[10]{-5, 6, -8, 2, 4, 9, -7, 4, 1, 0}; 	
                    // одномерный массив Mas из 10 целых чисел        
         int obr;      // образец для поиска
         bool Yes; // признак обнаружения
         int i;         //счетчик цикла 
         for (i = 0; i < 10; i++)
         Console.WriteLine("Mas[" + i + "]=" + Mas[i]);
         Console.WriteLine();
         Console.WriteLine("Введите образец для поиска");
         obr = Convert.ToInt16(Console.ReadLine());
         Yes = false;
         i=0;
            do
            {
                if (Mas[ i ]==obr )
                {
                    Yes=true;
                    break;
                }
            else i=i+1; 
            } 
         while ( i<10  | Yes == true); 
         if (Yes == true) Console.WriteLine("Имеется 
совпадение с элементом {0}. Его индекс: {1}", Mas[i], i );
else Console.WriteLine("Совпадение с образцом отсутствует ");
         Console.ReadKey();
}
Сортировка массива
Под сортировкой массива подразумевается процесс перестановки элементов массива, с целью размещения элементов массива в определенном порядке. 
Например, для целых чисел А после сортировки по возрастанию должно выполняться условие:
A[1]  A[2]  A[3]  . . .  A[size],       где size – верхний индекс 
Алгоритм сортировки:
1. Просмотреть массив от 1 элемента, найти min элемент и поместить его на место 1 элемента, а 1-й на место min.
2. Просмотреть массив от 2 элемента, найти min элемент и поместить его на место 2 элемента, а 2-й на место min
3. И так далее до последнего элемента.
Элементы массива А
A[ 1 ]= 2
A[ 2 ]= 6
A[ 3 ]= -5
A[ 4 ]= 3
A[ 5 ]= 20
A[ 6 ]= -10
A[ 7 ]= 8
A[ 8 ]= 0
A[ 9 ]= 9
A[ 10 ]= -2
Сортировка массива 
-10  6  -5  3  20  2  8  0  9  -2
-10  -5  6  3  20  2  8  0  9  -2
-10  -5  -2  3  20  2  8  0  9  6
-10  -5  -2  0  20  2  8  3  9  6
-10  -5  -2  0  2  20  8  3  9  6
-10  -5  -2  0  2  3  8  20  9  6
-10  -5  -2  0  2  3  6  20  9  8 
-10  -5  -2  0  2  3  6  8  9  20
-10  -5  -2  0  2  3  6  8  9  20

Отсортированный массив
-10   -5   -2   0   2   3   6   8   9   20


Пример 3. Отсортировать массив целых чисел по возрастанию.
static void Main(string[] args)
        {
int[] A = new int[10]{2, 6, -5, 3, 20, -10, 8, 0, 9, -2}; 	  
// одномерный массив А из 10 целых чисел        
int min;   // минимальный элемент
int buf;   // буфер для обмена элементами
int i,j,k; //счетчики цикла 
for (i = 0; i < 10; i++)
Console.WriteLine("A[" + i + "]=" + A[i]);
Console.WriteLine();
Console.WriteLine("Сортировка массива");
Console.WriteLine();
for (i = 0; i < 9 ; i++)
{
min=i;
for (j = i+1; j < 10; j++)
if (A[j]<A[min]) min=j;
buf=A[i];
A[i]=A[min];
A[min]=buf;
for (k = 0; k < 10; k++)
Console.Write(" " + A[k]);
Console.WriteLine();
}
Console.WriteLine();
Console.WriteLine("Массив отсортирован ");
Console.WriteLine();
for (k = 0; k < 10; k++)
Console.Write(" " + A[k]);
Console.ReadKey();
}








Расчет статистических показателей

Пример 4. Рассчитать суммарное и среднее значение элементов заданного массива. 

int[] N = {99, 10, 100, 18, 78, 23, 63, 9, 87, 49}; 	 
  // одномерный массив А из 10 целых чисел        
int sum=0;   // суммарное значение
double avg;   // среднее значение
for (int i = 0; i < 10; i++)
  sum = sum + N[i];
avg=(double)sum/10;
Console.WriteLine("Сумма: "+ sum);
Console.WriteLine();
Console.WriteLine("Среднее: "+ avg);
Console.ReadKey();



int[,] N = {{-99,10,50,18},{78,-23,63,9},{87,49,-55,10},{16,8,95,-16}};
            // двумерный массив N из 4x4 целых чисел        
int c = 0;  // счетчик для подсчета количества элементов
Console.WriteLine("Матрица N[4,4] целых чисел");
Console.WriteLine();            // Вывод матрицы
for (int i = 0; i < 4; i++)
{
for (int j = 0; j < 4; j++)
Console.Write(N[i, j].ToString("D2") + "   "); // D2 – два десятичных элемента 
Console.WriteLine();
}
Console.WriteLine();
int sum = 0;   // суммарное значение
double avg;   // среднее значение
for (int i = 0; i < 4; i++)
for (int j = 0; j < 4; j++)
  {
  sum = sum + N[i,j];
c=c+1;
              }
  avg = (double)sum / с;
Console.WriteLine("Результаты"); 
Console.WriteLine();        
Console.WriteLine("Сумма: " + sum);
Console.WriteLine("Среднее: " + avg);
Console.ReadKey();               // Пауза

Использование генератора случайных чисел
Иногда в качестве элементов массива используют случайные числа, которые можно получить с помощью функции Random(), которая генерирует случайное число в диапазоне 0..1. 
Перед первым обращением к функции Random() необходимо вызовом процедуры Random инициализировать программный генератор случайных чисел.
Пример 5. Ввод одномерного массива A с использованием программного генератора случайных чисел.
static void Main(string[] args)
        {
            int n = 0, N=10;       // Переменные типа int
            Console.WriteLine();
            Random r = new Random();            // Для случайных чисел
            int[] A = new int[N];                          // Массив типа int
            Console.WriteLine("Создан массив A случайных целых чисел");
            Console.WriteLine();
            Console.WriteLine ("Номер n" + " Значение A[n]");
            for (n = 0; n < N; n++)
            {
                A[n] = r.Next(0, 100);      // Генерация случайного числа в диапазоне от 0 до 99
                Console.WriteLine(" {0} {1,10}", n, A[n] );
            }
            Console.WriteLine();
            Console.WriteLine("Нажмите любую клавишу");
            Console.ReadKey();                 // Пауза
        }

Как видно генератор выдает числа в диапазоне от 0 до 99

Пример 6. Вычислить наименьший элемент Mmin массива M и его порядковый номер Nmin. Размерность массива N=10. В программе элементы массива создаются генератором случайных чисел.

           int n = 0, N = 10, Nmin = 0, Mmin = 0;       // Переменные типа int
           Console.WriteLine();
            Random r = new Random();            // Для случайных чисел
            int[] M = new int[N];               // Массив типа int
            Console.WriteLine("Создан массив M случайных целых чисел");
            Console.WriteLine();
            Console.Write("Номер n" + " Значение M[n]");
            Console.WriteLine();
            for (n = 0; n < N; n++)
            {
                M[n] = r.Next(0, 100);    // Генерация случайного числа
                Console.WriteLine(" {0} {1,10}", n, M[n]);
            }
            Mmin = M[0];                      // Предположение
            Nmin = 0;
            for (n = 1; n < N; n++)
            if (M[n] < Mmin)                  // Обнаружение минимума
            {
                Mmin = M[n];
                Nmin = n;
            }
            Console.WriteLine();
            Console.WriteLine("Результаты");
            Console.WriteLine();
            Console.Write("Nmin=");                // Вывод Nin
            Console.WriteLine(Nmin.ToString());
            Console.Write("Mmin=");                // Вывод Mmin
            Console.WriteLine(Mmin.ToString());
            Console.WriteLine();
            Console.WriteLine("Нажмите любую клавишу");
            Console.ReadKey();                     // Пауза

Пример 7. Вывести квадратную матрицу X размером RxC в виде таблицы. Найти максимальное значение элемента и его координаты: номер строки  R и номер столбца C. 
       {    
            int r=0, R=0, Rmax=0, c=0, C=0, Cmax=0, Mmax=0;  // Переменные типа int
            Console.WriteLine("Введите число строк R и столбцов матрицы");
            Console.Write("Число строк R=");                             // Введите R
            R = Convert.ToInt32(Console.ReadLine());
            Console.Write("Число столбцов C=");                      // Введите C
            C = Convert.ToInt32(Console.ReadLine());
            Console.WriteLine();
            Random rnd = new Random();          // Для случайных чисел
            int[ , ] M = new int[R, C];                   // Матрица M[R,C] типа int
            for (r = 0; r < R; r++)                         // Внешний цикл по строкам
            {
                for (c = 0; c < C; c++)                  // Внутренний цикл по столбцам
                {
                    int Mm = rnd.Next(0, 100);  // Генерация случайного числа от 0 до 99
                    M[r,c] = Mm;
                    if (M[r,c] > Mmax)                     // Обнаружение максимума
                    {
                        Mmax = M[r,c];                     // Значение максимума
                        Rmax = r;                             // Номер строки
                        Cmax = c;                            // Номер столбца
                    }
                }
            }                                               // Вывод матрицы
            Console.WriteLine("Создана матрица M[R,C] случайных целых чисел");
            Console.WriteLine();
            for (r = 0; r < R; r++)
            {
                for (c = 0; c < C; c++)
                {
                    Console.Write(M[r, c].ToString("D2")+"   "); 
                }
                Console.WriteLine();
            }
            Console.WriteLine();
            Console.WriteLine("Результаты");
            Console.WriteLine();
            Console.Write("Максимальное значение Mmax=");   // Вывод Mmax
            Console.WriteLine(Mmax.ToString());
            Console.Write("Номер строки Rmax=");                     // Вывод Rmax
            Console.WriteLine(Rmax.ToString());
            Console.Write("Номер столбца Cmax=");                 // Вывод Cmax
            Console.WriteLine(Cmax.ToString());
            Console.ReadKey();                                                  // Пауза
}

По результату нужно проверить правильность исполнения алгоритма.
Массивы строк
Подобно другим типам данных строки могут быть собраны в массивы. 
Пример 8. В заданном строковом массиве заменить одни слова на другие.
string[ ] str = {"Это ","очень ","простой ","тест." }; 
            Console.WriteLine("Исходный массив: ");
            Console.WriteLine();
            for (int i=0; i < str.Length; i++)
            Console.Write(str[i] + "  ");          
            Console.WriteLine("\n");   //Вывод на печать через клавишу Tab
            // Изменяем строку
            str[1]="тоже ";
            str[3]="тест, не правда ли?";
            Console.WriteLine("Модифицированный массив: ");
            Console.WriteLine();
            for (int i=0; i < str.Length; i++)
            Console.Write(str[i]+"  ");
            Console.ReadKey(); // Пауза


Пример 9. Ввести массив символов и заменить один из символов, например 'a' на другой, например 'x'. Подсчитать количество замен.

char[] Q = new char[10]; 
char a, x;          int c=0;  // Количество замен
            Console.WriteLine("Ввод символов в массив Q");
            for (int k = 0; k < 10; k++)
            {
                Console.Write("Введите {0}", k);
                Console.WriteLine(" элемент массива Q");
                Q[k] = Convert.ToChar(Console.ReadLine());
            }
            Console.WriteLine();
            Console.WriteLine("Исходный массив Q: ");
            foreach (char k in (char[])Q)
            Console.Write("{0} ", k); //вывод элементов массива Q
            Console.WriteLine();
            for (int k=0; k < 10; k++)
                 if (Q[k] == 'a')       // символ, который надо найти
                 {
                    Q[k] = 'x';         // символ, на который надо заменить
                    c = c + 1;         // количество замен
                 }
            Console.WriteLine();
            Console.WriteLine("Модифицированный массив Q: ");
            foreach (char k in (char[])Q)
            Console.Write("{0} ", k); //вывод элементов массива S
            Console.WriteLine();
            Console.WriteLine();
            Console.WriteLine("Количество замен ={0} ", c); 
            Console.ReadKey(); // Пауза










Итоги лекции. В лекции были представлены примеры решения массивов, как одномерных, так и двух мерных. Было дано определение массива, изучены способы задания, вывод. Изучены форматы объявления массива как одномерного, так и двухмерного, инструкция тела. Использование генератора чисел при задании массива.

Контрольные вопросы
Что такое массив?
Описание типа - массив.
Какие операторы языка можно использовать для описания массивов?
Особенности организации цикла при обработке массивов?
Особенности программирования при обработке массивов?
Особенность ввода и вывода массивов?
Отличие задания одномерного массива от двухмерного.
Как создать двухмерный массив случайных целых чисел?
Как создать двухмерный массив вещественных чисел?
Каков формат объявления двумерного массива?
С чего начинается индексация массивов?