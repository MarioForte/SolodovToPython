Лекция 4
Операторы

Цель лекции: Ознакомиться с понятием «операторы», как они применяются в программах на языке C#. Уяснить, для чего нужны операторы.

Оператор – это запись инструкций по выполнению некоторой последовательности действий. Операторы используются для выполнения вычислений, присвоения значений, проверки на равенство и неравенство и т. д.
В языке C# имеется большой набор операторов. Они представляют собой символы, определяющие операции, которые необходимо выполнить с выражением. 
Операторы в выражениях исполняются с приоритетами:   
высший приоритет имеют основные операторы, 
далее мультипликативные (типа умножения), 
затем аддитивные (типа сложения) и 
далее отношения (типа сравнения). 

4.1 Основные операторы
Таблица 4.1
Основные операторы
Пример 1:
private void button1_Click(object sender, EventArgs e)
        {
            button1.Visible = false;
            label1.Text = "Студент";
            textBox1.Text = "Группа ПИЭ-01";
        }
Пример 2: 
double x, a, z;
a = 0.6; x = 0.5;
z = (Math.Pow(Math.Sin(x + 5), 2) - Math.Abs(x)) / 
(Math.Exp(-a * x) + Math.Pow(x,3));
Console.WriteLine("z={0:E}", z); 
Console.ReadKey();

4.2 Унарные операции
Таблица 4.2
Унарные операции
Пример 3:
        int x=10, y1, y2, y3;
        y1 = ++x;                       //x=11
        y2 = x++;                       //x=11
        y3 = x;                           //x=12
       Console.WriteLine("y1= " + y1);
       Console.WriteLine("y2= " + y2); 
       Console.WriteLine("y3= " + y3); 

В обоих случаях переменная х получит значение 11. Разница состоит лишь в том, в какой момент она станет равной 11 (до присвоения ее значения переменной y или после).

Пример 4:
        int x=10, y1, y2;
        y1 =x + ++x;
        y2 = x;
        Console.WriteLine("y1= " + y1);
        Console.WriteLine("y2= " + y2);
        Console.ReadKey();

Инструкция x + ++x выполняется следующим образом: сначала запоминается исходное значение х=10, затем инкрементируется х (х=10+1=11). Далее суммируются новое значение x с исходным (11+10=21), а результат суммирования присваивается y.
Пример 5:
        int x = 10, y1, y2;
        y1 = x + x++;
        y2 = x;
        Console.WriteLine("y1= " + y1);
        Console.WriteLine("y2= " + y2);
        Console.ReadKey();

Инструкция x + x++ выполняется следующим образом: сначала суммируются х+х (10+10=20), результат суммирования присваивается y, затем инкрементируется переменная х (10+1=11) для дальнейшего использования в программе.
Пример 6
        int x=6, y1, y2;
        y1 =x + --x;
        y2 = x;
        Console.WriteLine("y1= " + y1);
        Console.WriteLine("y2= " + y2);

4.3 Мультипликативные операторы
Таблица 4.3
Мультипликативные операторы


Пример7:
   int  ires, ioct;
   double dres, doct;
   ires = 10 / 3;
   ioct = 10 % 3;
   dres = 10.0 / 3.0;
   doct = 10.0 % 3.0;
   Console.WriteLine("Результат и остаток от деления 10/3=" + ires + " " + ioct);
   Console.WriteLine("Результат и остаток от деления 10.0/3.0=" + dres + " " + doct);


4.4 Аддитивные операторы
Таблица 4.4
Аддитивные операторы (типа сложения)
Пример 8:
            int a, b, z, t;
            a = 2; b=3;
            z=a+b; 
            Console.WriteLine("Сумма a+b="+ z );
            t=b-a;
            Console.WriteLine("Разность b-a="+ t ); 

4.5 Операторы отношений
Результат выполнения операторов отношений и логических операторов имеет тип bool. 
В C# на равенство (==) и не равенство (!=) можно сравнивать все объекты ( x=='a' ).
Но операторы сравнения (<, >, <=, >=) можно применять только к типам, которые поддерживают только отношение упорядочения, т.е к числовым типам. 
Например, x>2, z==0, Math.Sin(x)<=5. 
Таблица 4.5
Операторы отношений
Пример 9:
            int a, b;
            a = 3; b=3;
            if (a==b) Console.WriteLine("Переменные равны");
            Console.ReadKey();


Пример 10:
            int a, b;
            a = 3; b=0;
            if (a==b) Console.WriteLine("Переменные равны");
            else if (a>=0) Console.WriteLine("Значение а неотрицательно");
            Console.ReadKey();


Пример 11:
            int a, b;
            a = -3; b=0;
            if (a==b) Console.WriteLine("Переменные равны");
            else if (a>=0) Console.WriteLine("Значение а неотрицательно");
            else if (a<0) Console.WriteLine("Значение a отрицательно");
     Console.ReadKey();



Операнды логических операций (&, |, !, ^) должны иметь тип bool. 
Вычисление с использованием логических операций происходит по разрядно. 
Логические операторы выполняют логические операции в соответствии с таблицей 4.6:
Таблица 4.6
Логические операции
Сокращенные операторы && (И), || (ИЛИ). Различия между обычной и сокращенной версиями заключается в том, что при обычной версии вычисляются оба операнда, а при сокращенной версии второй операнд вычисляется только при необходимости.

4.6 Операторы присвоения
Операторы присвоения задают новое значение переменной. Имя переменной и результат вычисления выражения должны быть одного типа или совместимыми по присвоению.
Присвоение бывает простое и сложное. При простом присвоении оператор состоит из одного символа (=). Синтаксис оператора:
ИмяПеременной = выражение;
Например,   x = x + 1;      
                     y = Math.Sin(x);
Присваиваемое значение должно иметь тип, совпадающий с типом переменной, или допускающий неявное преобразование. 
Пример 12:
            int x=2; double y;
            y = x * x;
           Console.WriteLine("x={0} y={1}", x, y);
           Console.ReadKey();

В противном случае можно использовать явное преобразование, используя синтаксис:
ИмяПеременной = (тип переменной слева от =) выражение;

Пример 13:
          
          double x = 2.5; float y=0;
          y = (float) (x * x);
         Console.WriteLine("x={0,4:f} y={1,4:f}", x, y);
         Console.ReadKey();

Пример14:
          double x = 2.5; int y=0;
          y = (int) (x * x);                   // 6,25 округляется до 6         
          Console.WriteLine("x={0,5:f} y={1,5:f}", x, y); 
         Console.ReadKey();
          
          

          // Приведение double в  int ведет к потере дробной части (в примере 0,25)

Пример 15:
          double n; int y;
          n=5;
          y = (int)(Math.Sqrt(n));
          Console.WriteLine("y= " +y);
          Console.ReadKey();

Пример 16:
          byte b,y;
          b = 10;
          y = (byte)(b * b); //результат представляет выражение int и требует 
							преобразование             
          Console.WriteLine("y: " +y);
         Console.ReadKey();


Оператор сложного присвоения состоит из нескольких знаков без разделителей. Правый символ – знак простого присвоения, слева дополнительные символы, указывающие на тип дополнительной операции, выполняемой перед присваиванием (табл.4.7).
Таблица 4.7
Составные операторы и их действия

Преимущества составных операторов:
Составные операторы компактнее своих «длинных» эквивалентов. 
Их наличие приводит к созданию более эффективного кода (т.к. операнд при этом вычисляется только один раз).

Примеры использования составных операторов:
x=x+10     может бать записано       x+=10
x=x–100   может бать записано        x–=100

4.7 Инструкции
Код приложений в C# состоит из инструкций (команд) с ключевыми словами и выражениями с операторами.
В инструкцию включают объявление переменных, присвоение значений, вызов методов, ветвление на один или другой блок кода, в зависимости от заданного условия. 
Инструкция – строка кода, которая заканчивается точкой с запятой.
Блочная инструкция – набор инструкций в фигурные скобки { }. Программный блок представляет собой группирование двух и более инструкций заключенные в фигурные скобки. Последние могут содержать вложенные блоки { {…} }. 
Используется для превращения группы операторов в один там, где по правилам языка может применяться только один оператор, а действий несколько.
Программные блоки не снижают динамику выполнения программ.
Пример использования однострочных инструкций и блок многострочной инструкции:
Вариант 1
static void Main(string[] args)
        {
            int i, j, d;
            i=5;
            j=10;
            if (i != 0)
            {
                  Console.WriteLine("i не равно 0");
                  d = j / i;
                  Console.WriteLine("j/i равно "+ d);
            }       
            Console.WriteLine("Нажми клавишу Enter");
            Console.ReadKey();
        }


Вариант 2:
            int i, j, d;
            i=0;
            j=10;
            if (i !=0)
            {
                Console.WriteLine("i не равно 0");
                d = j / i;
                Console.WriteLine("j/i равно "+ d);
            }       
            Console.WriteLine("Нажми клавишу Enter");
            Console.ReadKey();

Безусловный переход вызовом функций
Когда компилятор находит в основном тексте программы имя функции, то происходит приостановка выполнения текущего кода программы и осуществляется переход к найденной функции. Когда функция выполнится и завершит свою работу, то произойдет возврат в основной код программы, на ту инструкцию, которая следует за именем функции. 
Имя функции должно содержать пару круглых скобок (), даже если у функции нет аргументов. Это признак функции или метода. Например, Math.Sin(x).
Оператор перехода goto
Он предназначен  для изменения  порядка   выполнения операторов программы.
Инструкция goto используется следующим образом: 
В коде программы создается метка с именем (например, M). 
Организуется переход на эту метку инструкцией goto M. 
Имя метки M в коде обязательно должно заканчиваться двоеточием (:). Оно указывает на точку в программе, с которой будет выполняться программа после использования инструкции goto. 
Пример. Вывести последовательность целых чисел до 9. Метка M – начало вывода цифр. Обычно инструкция goto связана с условием.
	public static int Main()
	{ 
            int i = 0;
        M: Console.WriteLine("i: {0 } ", i);         
            i = i + 1;
            if (i < 10) goto M;
		                  // Метка должна быть уникальной.
	}        

Условные операторы. Сложные условия
В программе условие – это выражение логического типа (Bool), которое может принимать одно из двух значений True(истина) или False(ложь).
Примеры простых условий:
(Summa<1000)                                // значение переменной Summa < 1000?
(Math.Pow(x,2)-10*x>=5)                // выражение x2 -10·x5 ?
(x % 2 = 0)                                        // остаток от деления x на 2 равен 0?
Примеры сложных условий:
(Day==6 | Day==7)           // день суббота или воскресенье
(Sum>100 & Day==7)      //скидка на товар стоимостью более 100у.е. в воскресный день 
(m==1 & d>=1 & d<=10)  //дни с 1 по 10 в первом  месяце года. 
Логические операторы & | имеют более низкий приоритет, чем операторы сравнения, и поэтому в условиях скобки можно не использовать.

Краткие итоги. В лекции были изучены операторы, которые применяются при работе с языком C#. Рассмотрены примеры работы операторов. 

Контрольные вопросы:
Дайте определение понятию «оператор».
Каковы приоритеты выполнения операторов?
Приведите примеры работы основного оператора.
Приведите примеры работы унарного оператора.
Приведите примеры работы мультипликативного и аддитивного операторов.
Перечислите операторы отношений и приведите пример их работы.
Дайте определение «операторы присвоения» и приведите пример их работы, назовите их преимущества.
Дайте определение понятию «инструкция».
Назовите оператор перехода и какова его функция.