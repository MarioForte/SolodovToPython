Лекция 5
Инструкции управления

Цель лекции. Разобрать инструкцию if, где она применяется и как работает. Изучить вложенные инструкции, инструкции выбора, как они работают.

5.1 Инструкция if
Применяется для ветвления по двум ветвям. 
Полный формат (синтаксис) инструкции:
if (условие) инструкция 1;   // одна инструкция1 языка
else инструкция 2;               // одна инструкция2 языка




Если условие выполняется, то исполняется 
инструкция 1, в противном случае исполняется 
инструкция 2. Фраза else может отсутствовать, 
т.к. это необязательная часть инструкции if. 
В общем виде, когда надо выполнить несколько действий, инструкция if  записывается следующим образом:
if (условие) 
	{
		Блок инструкций 1; //несколько действий
	}
else 
	{
		Блок инструкций 2; //несколько действий
	}








Фраза else может отсутствовать, т.к. это необязательная часть инструкции if. 
Если условие выполняется, то исполняется Блок инструкций 1, в противном случае исполняется Блок инструкций 2. 
Фигурные скобки записываются в случае, если в блоке более, чем одна инструкция.

Выполняется инструкция if следующим образом:
Вычисляется значение условия (правда или ложь?);
Если условие истинно (true), то выполняются инструкции1. На этом выполнение инструкций if завершается, инструкции, следующие за словом else, не будут выполнены. Если условие ложно (false), то выполняются инструкции, следующие за словом else, а инструкции за словом if игнорируются.
Пример 1. Поиск максимального числа из двух чисел x и y.

// 1-й вариант решения
      int y, x, max;
      x=12; y=5;
      if (x>y) max=x;
      else max=y;
      Console.WriteLine("Максимальное "+ max);                   

Сокращенный формат if
Сокращенная форма используется для усеченного алгоритма, когда ветвь с альтернативным решением отсутствует.
 if (условие) инструкция;

// 2-й вариант решения задачи поиска 
максимального числа их двух чисел:
      int y, x, max;
      x=12; y=5;
      max=x;
      if (x<y) max=y;
      Console.WriteLine("Максимальное "+ max);

В случае нескольких действий в одной ветви:
if (условие) 
       {
	 Блок инструкций 1;
       }



5.2 Вложенные инструкции if; else …
Применяются для множественного ветвления. Синтаксис инструкции:
if (условие_1) 
	{
		Блок инструкций 1;
	}
else
	if (условие_2) 
		{
			Блок инструкций 2;
		}
	else 
		{
			Блок инструкций 3;
		}
Фраза else может отсутствовать, т.к. т.к. это необязательная часть инструкции if. 
Если условие1 выполняется, то исполняется Блок инструкций 1, в противном случае проверяется условие2. Если оно выполняется, то исполняется Блок инструкций 2, в противном случае Блок инструкций 3.
В случае, если в какой-либо ветви необходимо выполнить одну инструкцию, то блочная инструкция в виде фигурных скобок { } в этой ветви не нужна.


Пример 2. 
Задача.   Вычислить значение функции:           




Ответы решения задачи:






При помощи логических операторов & («И») и | («ИЛИ») из простых условий можно строить сложные. 
Например: 

1)                                                                                  2)



Примеры записи условия:  
if (x<=b & x>=a) <выражение C1>; 
                       else <выражение C2>;         
                                 или            
if (x<a | x>b) <выражение C2>; 
             else <выражение C1>;

5.3 Инструкции выбора switch, case
Применяется для множественного ветвления на произвольное число направлений.
С его помощью можно выбрать вариант из множества альтернатив.
Если в условии задачи имеется сложный набор условий, то использование вложенных инструкций if…else приводит к громоздкому коду. Для упрощения кода лучше воспользоваться инструкцией switch (переключение)
Инструкция switch выбирает нужное действие из списка возможных, размещенных во фразах выбора case (выбор).
Общий формат записи:
switch (выражение)
{
	case константа_1 : инструкция действия; инструкция прерывания; 
	case константа_2 : инструкция действия; инструкция прерывания;
	……..
	default:: инструкция действия; инструкция прерывания;
}

Выполняются инструкции следующим образом:
1. Сначала вычисляется значение выражения.
2. Полученное значение  выражения последовательно сравнивается с константами из списка констант секций case.
3. Если значение выражения (или переменной) совпадает с константой из списка, то выполняется соответствующая этому списку группа инструкций в секции case  до тех пор, пока не встретиться  инструкция прерывания.
4. Если значение выражения (или переменной) не совпадает ни с одной константой из списка, то, выполняется последовательность инструкций, следующая за default.
Синтаксис инструкций switch, case позволяет не писать default и соответствующую последовательность инструкций. В этом случае, если значение выражения не совпадает ни с одной константой из всех списков, то выполняется следующая за case инструкция программы.
Элемент выражения (помещено в круглые скобки) возвращает константу. Должен быть целочисленного типа (например, char, byte, int), значение которого определяет дальнейший ход выполнения программы.  
Выражения, имеющие тип с плавающей точкой не разрешены. 
Иногда в качестве управляющего switch – выражения используется просто переменная. 
Case – константы должны быть литералами, тип которых совместим с типом заданного выражения. При этом никакие две case – константы в одной switch конструкции не могут иметь идентичных значений. 
В качестве инструкции прерывания действия используют break, которая прерывает выполнение инструкции switch. Альтернативой может быть и инструкции goto, которую обычно применяют для перехода в другое место программы. 
Пример 3. Программа запрашивает день недели. В зависимости от введенного номера выводится строка из списка с комментарием.
using System;
namespace ConsoleApplication1
{
    class Program
    {
        static void Main(string[] args)
        {
            int d;
            Console.Write("Введите день недели ");
            d= Convert.ToInt16(Console.ReadLine());//преобразует вводимое с клавиатуры число в виде строки в целый тип данных
            switch (d)
            {
                case 1: Console.WriteLine("Понедельник - рабочий день"); break;
                case 2: Console.WriteLine("Вторник - рабочий день"); break;
                case 3: Console.WriteLine("Среда - рабочий день"); break;
                case 4: Console.WriteLine("Четверг - рабочий день"); break;
                case 5: Console.WriteLine("Пятница - рабочий день"); break;
                case 6: Console.WriteLine("Суббота - самоподготовка"); break;
                case 7: Console.WriteLine("Воскресенье - выходной день"); break;
                default: Console.WriteLine("Неверный ввод данных. Введите 1<=d<=7"); break;
            }
            Console.ReadKey();
        }
    }
}
      Результаты работы программы:




                                                                         
                                 . . .            










Пример 4.  Программа принимает с клавиатуры код клавиш A, B, C и в зависимости от ее номера выводит на дисплей текстовый комментарий.
static void Main(string[] args)
        {
        char q;
            Console.WriteLine("Введите букву ");   //ввод данных с клавиатуры
            q =Convert.ToChar(Console.ReadLine()); /*преобразует вводимое с клавиатуры число в виде строки в символьный тип данных*/
            switch (q)       // переменная символьного типа
            {
                case 'A': Console.WriteLine("q содержит A"); break;
                case 'B': Console.WriteLine("q содержит В"); break;
                case 'C': Console.WriteLine("q содержит C"); break;
            }
            Console.ReadKey();
        }
Необязательная инструкция default отсутствует.
В общем виде, когда надо выполнить несколько действий,  операторs  switch,  case записывается следующим образом:

switch  (выражение)
case константа_n1: 
   {          
       //инструкции1;
   }                          	
case константа_n2: 
   {
       //инструкции2;
   }                            
case константа_nn: 
   {
       //инструкции nn;
   }                            
default:  
   {                         
       //инструкции;
    }                          
В консольном приложении вводить данные можно программно, присваивая переменным или константам значения в соответствии с объявленным ранее типом или непосредственно с клавиатуры при исполнении программы. Например:
x = Convert.ToDouble(Console.ReadLine()); //вещественный тип
d = Convert.ToInt16(Console.ReadLine());    //целый тип  
z = Convert.ToInt32(Console.ReadLine());    //целый тип 
ch=Convert.ToChar(Console.ReadLine());    //символьный тип
Методы содержат процедуру чтения с последующим образованием новой строки (ReadLine()) и  функцию преобразования вводимых с клавиатуры данных, воспринимаемых в виде строки в тип данных, соответствующих объявленному диапазону.


Пример 5. Используя оператор выбора, вычислить значения функции:

                                                                                                 




























static void Main(string[] args)
        {
           int A;
           double x,y;
           Console.WriteLine("Введите x ");  
           x= Convert.ToDouble(Console.ReadLine());
           M:Console.WriteLine("Введите параметр А ");
           A= Convert.ToInt16(Console.ReadLine());
           switch  (A)
           {
             case 0:y=Math.Cos(x); break;
             case 1:y=(x-10)*8; break;
             case -1:y=A*7*x; break;
             default:
               {  
                Console.WriteLine("A введено не верно!");
                goto M;
               }
           }
            Console.WriteLine(" А=" + A );
            Console.WriteLine(" *********************** ");
            Console.WriteLine(" * x= {0,4} * y= {1,6:f} *",x,y);
            Console.WriteLine(" *********************** ");
            Console.ReadKey();
        }



Программа была выполнена три раза с разными значениями параметра А, что бы показать, правильное решение задачи.

Краткие итоги. В лекции  рассмотрены инструкции необходимые для решения задач с условием ветвления.  Для этого были изучены следующие инструкции: if, else, switch, case. И дан пример работы оператора выбора goto.

Контрольные вопросы:
Применение инструкции if и как она выполняется.
Приведите пример выполнения инструкции if/
Опишите работу вложенных инструкций if, else.
Инструкции выбора switch, case.
Формат записи инструкций switch, case.
Как выполняются инструкции switch, case.
Приведите пример выполнения инструкции switch, case.
Приведите пример выполнения оператора goto.